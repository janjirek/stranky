---
import Logo from './logo.astro';
import SocialMedia from '../social-media.astro';
import { Icon } from 'astro-icon/components';

import { render, getEntry } from 'astro:content';
import TermsDialog from '../terms-dialog';

const about = await getEntry('about', 'about');
if (!about) {
  throw new Error('About entry not found');
}

const terms = await getEntry('terms', 'terms');
if (!terms) {
  throw new Error('Terms entry not found');
}
const { Content: TermsContent } = await render(terms);

interface Props {
  border?: boolean;
}

const { border = true } = Astro.props;
---

<footer class="bg-slate-900 text-slate-400 border-t border-slate-800">
  <div class="mx-auto max-w-6xl px-4 sm:px-6">
    
    <div class="grid gap-10 py-12 sm:grid-cols-12 md:py-16">
      
      <div class="sm:col-span-12 lg:col-span-4 space-y-4">
        <div>
          <div class="w-48">
              <Logo variant="white" />
          </div>
        </div>
        <p class="text-sm text-slate-400 leading-relaxed max-w-xs">
           Profesionální realitní služby v Pardubicích a Hradci Králové. Zakládám si na férovosti, lidském přístupu a maximální péči.
        </p>
        <div class="pt-2">
           <SocialMedia />
        </div>
      </div>

      <div class="sm:col-span-6 md:col-span-3 lg:col-span-2">
        <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-4">Menu</h3>
        <ul class="space-y-2 text-sm">
          <li><a class="hover:text-white transition-colors" href="/">Úvod</a></li>
          <li><a class="hover:text-white transition-colors" href="/o-mne">O mně</a></li>
          <li><a class="hover:text-white transition-colors" href="/reference">Reference</a></li>
          <li><a class="hover:text-white transition-colors" href="/nemovitosti">Nabídka Nemovitostí</a></li>
          <li><a class="hover:text-white transition-colors" href="/zakazky">Realizované Zakázky</a></li>
          <li><a class="hover:text-white transition-colors" href="/clanky">Články</a></li>
          <li><a class="hover:text-white transition-colors" href="/kontakt">Kontakt</a></li>
        </ul>
      </div>

      <div class="sm:col-span-6 md:col-span-3 lg:col-span-3">
        <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-4">Služby</h3>
        <ul class="space-y-2 text-sm">
          <li><a class="hover:text-white transition-colors" href="/sluzby/prodej">Prodej nemovitosti</a></li>
          <li><a class="hover:text-white transition-colors" href="/sluzby/pronajem">Pronájem nemovitosti</a></li>
          <li><a class="hover:text-white transition-colors" href="/sluzby/dedictvi">Dědické řízení</a></li>
          <li><a class="hover:text-white transition-colors" href="/sluzby/koupe">Zastupování při koupi</a></li>
        </ul>
      </div>

      <div class="sm:col-span-6 md:col-span-3 lg:col-span-3">
        <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-4">Kontaktujte mě</h3>
        <ul class="space-y-4 text-sm">
          <li>
            <a href={`tel:${about.data.phone}`} class="flex items-center gap-3 hover:text-white transition-colors group">
              <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-blue-500 group-hover:bg-blue-600 group-hover:text-white transition-colors border border-slate-700">
                  <Icon name="mdi:phone" class="w-4 h-4" />
              </div>
              <span class="text-lg font-bold text-slate-200 group-hover:text-white transition-colors">{about.data.phone}</span>
            </a>
          </li>
          <li>
            <a href={`mailto:${about.data.email}`} class="flex items-center gap-3 hover:text-white transition-colors group">
              <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-blue-500 group-hover:bg-blue-600 group-hover:text-white transition-colors border border-slate-700">
                  <Icon name="mdi:email" class="w-4 h-4" />
              </div>
              <span>{about.data.email}</span>
            </a>
          </li>
        </ul>
      </div>

    </div>

    <div class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-slate-500 pb-12">
      <div>
        &copy; <span id="current-year"></span> Ing. Jan Jírek - Všechna práva vyhrazena.
      </div>
      
      <div>
         <TermsDialog
            client:load
            termsTitle={terms.data.title}
            triggerText="Ochrana osobních údajů"
            className="hover:text-white transition-colors cursor-pointer underline decoration-slate-600 underline-offset-4"
         >
            <TermsContent />
         </TermsDialog>
      </div>
    </div>

  </div>
</footer>

<script>
  const currentYear = document.getElementById('current-year');
  if (currentYear) {
    currentYear.textContent = new Date().getFullYear().toString();
  }
</script>
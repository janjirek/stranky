---
import EstateItem from './estate-item.astro';
import { getCollection } from 'astro:content';

const entries = (await getCollection('catalogue')).sort((a, b) => {
  return b.data.date.valueOf() - a.data.date.valueOf(); 
});

const estates = entries.map(entry => {
  // 游댠 ZM캨NA: Pou쮂셨치me slug P콎칈MO z frontmatteru (entry.data.slug) a filtrujeme pr치zdn칠
  return {
    ...entry.data,
    slug: entry.data.slug, 
  };
});
---

<section class="py-12 md:py-20 bg-slate-50 dark:bg-slate-900">
  <div class="mx-auto max-w-7xl px-4 sm:px-6">
    
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {estates.map(estate => (
        <EstateItem estate={estate} isHidden={false} />
      ))}
    </div>

    {estates.length === 0 && (
      <div class="text-center py-20 bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700">
        <p class="text-xl font-medium text-slate-600 dark:text-slate-300">
          Moment치ln캩 nem치m v nab칤dce 쮂멳n칠 nemovitosti.
        </p>
        <p class="mt-4 text-slate-500 dark:text-slate-400">
          Nev치hejte m캩 kontaktovat s va코칤 popt치vkou, r치d pro v치s najdu ide치ln칤 bydlen칤.
        </p>
      </div>
    )}

  </div>
</section>